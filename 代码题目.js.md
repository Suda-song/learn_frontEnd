
/** add(1)(2)(3)
 * @param {*} 
 * @return {*} 
 */ 
function add (num){
	let sum =num
	function inner(nextNum){
		if(nextNum === undefined){ return sum}
		sum = sum+num
		return inner
	}
	
	inner.toString = function(){
		return sum
	}
	return inner
}
//节流
function throttle(fn,wait){
	const startTime = Date.now()
	return function (){
		const nowTime = Date.now()
		if (nowTime - startTime >= wait){
			startTime = nowTime
			return fn.apply(this,arguments)
		}
	}

}
//防抖
function debounce(fn,wait,immediate=false){
	let timer = null
	return function(){
		if (timer){
			clearInterval(timer)
			timer = null
		}
		if (immediate){
			const flag = !timer
			flag&&fn.apply(this,arguments)
			timer = setTimeout(timer = null,wait)
		}else{
			timer = setTimeout(()=>{fn.apply(this,arguments)},wait)
		}
	}
}

//add(1)(2)(3)
function add(num) {
	let sum = num
	return function inner(nextNum){
		if (nextNum === undefined){return sum}
		sum += nextNum
		return inner
	}
	inner.toString = function(){
		return sum
	}		
	return inner
}

/** 浅拷贝
 * @param {*} obj
 * @return {*} 
 */
function shollowCopy(obj){
	if (!obj || typeof obj !== "object")
		return obj
	const newobj = Array.isArray(obj)?[]:{}
	for(const key in obj){
		if(newobj.hasownProPerty(key))
			newobj[key] = obj[key]
	}
	return newobj
}

/** 深拷贝
 * @param {*} obj
 * @param {*} [map=new Map()]
 * @return {*} 
 */
function deepCopy(obj,map=new Map()){
	if (!obj || typeof obj != 'object') {
		return obj
	}
	
	if(map.get(obj)){
		return(map.get(obj))
	}

	const newobj = Array.isArray(obj)?[]:{}

	map.set(obj, newObj)

	for (const key in obj){
		if (newobj.hasownProPerty(key)){
			newobj[key] = typeof obj[key] === 'object'? deepCopy(obj[key]):obj[key]
		}
	}
	return newobj
}
/** 手写 new 操作符
 * @param {Function} fn 构造函数
 * @return {*}
 */
function myNew(fn,...args){
	if (typeof fn !== 'function')
		return new TypeErrror('fn is not a function')
	const obj = {}
	 obj.__proto__ = constructor.prototype;
	 const result = fn.apply(obj,arg)
	 return result instanceof object?result:obj
}

<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE5ODQ1OTY5NDgsMTQ4NzExMzA4OF19
-->